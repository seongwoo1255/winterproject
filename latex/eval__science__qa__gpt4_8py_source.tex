\doxysection{eval\+\_\+science\+\_\+qa\+\_\+gpt4.\+py}
\hypertarget{eval__science__qa__gpt4_8py_source}{}\label{eval__science__qa__gpt4_8py_source}\index{llava/eval/eval\_science\_qa\_gpt4.py@{llava/eval/eval\_science\_qa\_gpt4.py}}
\mbox{\hyperlink{eval__science__qa__gpt4_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00001}\mbox{\hyperlink{namespaceeval__science__qa__gpt4}{00001}}\ \textcolor{keyword}{import}\ argparse}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00002}00002\ \textcolor{keyword}{import}\ json}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00003}00003\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00004}00004\ \textcolor{keyword}{import}\ re}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00005}00005\ \textcolor{keyword}{import}\ random}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00006}00006\ \textcolor{keyword}{from}\ collections\ \textcolor{keyword}{import}\ defaultdict}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00009}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a6f09ebf85269a6195ba3e094fa2c708e}{00009}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a6f09ebf85269a6195ba3e094fa2c708e}{get\_args}}():}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00010}00010\ \ \ \ \ parser\ =\ argparse.ArgumentParser()}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00011}00011\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/-\/base-\/dir'},\ type=str)}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00012}00012\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/-\/gpt4-\/result'},\ type=str)}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00013}00013\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/-\/our-\/result'},\ type=str)}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00014}00014\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/-\/split'},\ type=str,\ default=\textcolor{stringliteral}{'test'})}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00015}00015\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/-\/options'},\ type=list,\ default=[\textcolor{stringliteral}{"{}A"{}},\ \textcolor{stringliteral}{"{}B"{}},\ \textcolor{stringliteral}{"{}C"{}},\ \textcolor{stringliteral}{"{}D"{}},\ \textcolor{stringliteral}{"{}E"{}}])}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00016}00016\ \ \ \ \ \textcolor{keywordflow}{return}\ parser.parse\_args()}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00019}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a1d2bd458da09bbb19aff8c26b1ac5b81}{00019}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a1d2bd458da09bbb19aff8c26b1ac5b81}{convert\_caps}}(results):}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00020}00020\ \ \ \ \ fakecaps\ =\ []}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00021}00021\ \ \ \ \ \textcolor{keywordflow}{for}\ result\ \textcolor{keywordflow}{in}\ results:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00022}00022\ \ \ \ \ \ \ \ \ image\_id\ =\ result[\textcolor{stringliteral}{'question\_id'}]}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00023}00023\ \ \ \ \ \ \ \ \ caption\ =\ result[\textcolor{stringliteral}{'text'}]}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00024}00024\ \ \ \ \ \ \ \ \ fakecaps.append(\{\textcolor{stringliteral}{"{}image\_id"{}}:\ int(image\_id),\ \textcolor{stringliteral}{"{}caption"{}}:\ caption\})}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00025}00025\ \ \ \ \ \textcolor{keywordflow}{return}\ fakecaps}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00028}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_aa19efdeb13e20e14719a35ac849611f8}{00028}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceeval__science__qa__gpt4_aa19efdeb13e20e14719a35ac849611f8}{get\_pred\_idx}}(prediction,\ choices,\ options):}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00029}00029\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00030}00030\ \textcolor{stringliteral}{\ \ \ \ Get\ the\ index\ (e.g.\ 2)\ from\ the\ prediction\ (e.g.\ 'C')}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00031}00031\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00032}00032\ \ \ \ \ \textcolor{keywordflow}{if}\ prediction\ \textcolor{keywordflow}{in}\ options[:len(choices)]:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00033}00033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ options.index(prediction)}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00034}00034\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00035}00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ random.choice(range(len(choices)))}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00038}00038\ \textcolor{keywordflow}{if}\ \_\_name\_\_\ ==\ \textcolor{stringliteral}{"{}\_\_main\_\_"{}}:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00039}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_ac8a20f56fa2ef3b8b4f640a7775803a9}{00039}}\ \ \ \ \ args\ =\ \mbox{\hyperlink{namespaceeval__science__qa__gpt4_a6f09ebf85269a6195ba3e094fa2c708e}{get\_args}}()}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00041}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a0ef8df399536cdda1ccaec02b567c9e3}{00041}}\ \ \ \ \ base\_dir\ =\ args.base\_dir}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00042}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_ade5783b57f04796a918404048b448146}{00042}}\ \ \ \ \ split\_indices\ =\ json.load(open(os.path.join(base\_dir,\ \textcolor{stringliteral}{"{}pid\_splits.json"{}})))[args.split]}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00043}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a858afe3c48578c7235e1b9cbaa40808e}{00043}}\ \ \ \ \ problems\ =\ json.load(open(os.path.join(base\_dir,\ \textcolor{stringliteral}{"{}problems.json"{}})))}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00044}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_af5e1553e37bd32ce39298a77cda5d8f7}{00044}}\ \ \ \ \ our\_predictions\ =\ [json.loads(line)\ \textcolor{keywordflow}{for}\ line\ \textcolor{keywordflow}{in}\ open(args.our\_result)]}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00045}00045\ \ \ \ \ our\_predictions\ =\ \{pred[\textcolor{stringliteral}{'question\_id'}]:\ pred\ \textcolor{keywordflow}{for}\ pred\ \textcolor{keywordflow}{in}\ our\_predictions\}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00046}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_ad256819cc1bceba4423b5081d3aed1f6}{00046}}\ \ \ \ \ split\_problems\ =\ \{idx:\ problems[idx]\ \textcolor{keywordflow}{for}\ idx\ \textcolor{keywordflow}{in}\ split\_indices\}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00048}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a0817acb72de53089269db7dc77dffc52}{00048}}\ \ \ \ \ gpt4\_predictions\ =\ json.load(open(args.gpt4\_result))[\textcolor{stringliteral}{'outputs'}]}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00050}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a6b1fdf66c573685d5b418bcc4eeb3f62}{00050}}\ \ \ \ \ results\ =\ defaultdict(\textcolor{keyword}{lambda}:\ 0)}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00052}00052\ \ \ \ \ \textcolor{keywordflow}{for}\ prob\_id,\ prob\ \textcolor{keywordflow}{in}\ split\_problems.items():}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00053}00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ prob\_id\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ our\_predictions:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ prob\_id\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ gpt4\_predictions:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00057}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a2f28d72b62327c07949b3922dcffefc8}{00057}}\ \ \ \ \ \ \ \ \ our\_pred\ =\ our\_predictions[prob\_id][\textcolor{stringliteral}{'text'}]}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00058}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a6cc232e736dcdeda8643df4f5ea81d37}{00058}}\ \ \ \ \ \ \ \ \ gpt4\_pred\ =\ gpt4\_predictions[prob\_id]}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00060}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a8aebb821ff14c0f028c99e8bb0c9298e}{00060}}\ \ \ \ \ \ \ \ \ pattern\ =\ re.compile(\textcolor{stringliteral}{r'The\ answer\ is\ ([A-\/Z]).'})}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00061}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a130fe79d0c036f01d0a2f261a07e2403}{00061}}\ \ \ \ \ \ \ \ \ our\_res\ =\ pattern.findall(our\_pred)}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(our\_res)\ ==\ 1:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00063}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_afb0897292b7f6b9b26fc79fe9185d9c4}{00063}}\ \ \ \ \ \ \ \ \ \ \ \ \ our\_answer\ =\ our\_res[0]\ \ \textcolor{comment}{\#\ 'A',\ 'B',\ ...}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00064}00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ our\_answer\ =\ \textcolor{stringliteral}{"{}FAILED"{}}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00066}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a224b0316fcd09bd72818f9a67887fd5a}{00066}}\ \ \ \ \ \ \ \ \ gpt4\_res\ =\ pattern.findall(gpt4\_pred)}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00067}00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(gpt4\_res)\ ==\ 1:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00068}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_aeec210eeed54eb16814d66910a791918}{00068}}\ \ \ \ \ \ \ \ \ \ \ \ \ gpt4\_answer\ =\ gpt4\_res[0]\ \ \textcolor{comment}{\#\ 'A',\ 'B',\ ...}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ gpt4\_answer\ =\ \textcolor{stringliteral}{"{}FAILED"{}}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00072}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_adb3eeb95c2d0851edfaa1a0198503072}{00072}}\ \ \ \ \ \ \ \ \ our\_pred\_idx\ =\ \mbox{\hyperlink{namespaceeval__science__qa__gpt4_aa19efdeb13e20e14719a35ac849611f8}{get\_pred\_idx}}(our\_answer,\ prob[\textcolor{stringliteral}{'choices'}],\ args.options)}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00073}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_ad1340a6525afe7f6c4287b44338b57f4}{00073}}\ \ \ \ \ \ \ \ \ gpt4\_pred\_idx\ =\ \mbox{\hyperlink{namespaceeval__science__qa__gpt4_aa19efdeb13e20e14719a35ac849611f8}{get\_pred\_idx}}(gpt4\_answer,\ prob[\textcolor{stringliteral}{'choices'}],\ args.options)}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ gpt4\_answer\ ==\ \textcolor{stringliteral}{'FAILED'}:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \ \ \ results[\textcolor{stringliteral}{'gpt4\_failed'}]\ +=\ 1}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ continue}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \ \ \ \ gpt4\_pred\_idx\ =\ our\_pred\_idx}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ if\ our\_pred\_idx\ !=\ prob['answer']:}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ print(our\_predictions[prob\_id]['prompt'])}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ print('-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/')}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ print(f'LECTURE:\ \{prob["{}lecture"{}]\}')}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00083}00083\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ print(f'SOLUTION:\ \{prob["{}solution"{}]\}')}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ \ \ \ \ print('=====================')}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00085}00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ continue}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ gpt4\_pred\_idx\ =\ our\_pred\_idx}}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ gpt4\_pred\_idx\ ==\ prob[\textcolor{stringliteral}{'answer'}]:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ results[\textcolor{stringliteral}{'correct'}]\ +=\ 1}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ results[\textcolor{stringliteral}{'incorrect'}]\ +=\ 1}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00094}00094\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ gpt4\_pred\_idx\ ==\ prob[\textcolor{stringliteral}{'answer'}]\ \textcolor{keywordflow}{or}\ our\_pred\_idx\ ==\ prob[\textcolor{stringliteral}{'answer'}]:}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ results[\textcolor{stringliteral}{'correct\_upperbound'}]\ +=\ 1}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00098}00098\ }
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00099}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_aecce2af76b60015a35b2ec9d80ebbc1e}{00099}}\ \ \ \ \ correct\ =\ results[\textcolor{stringliteral}{'correct'}]}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00100}\mbox{\hyperlink{namespaceeval__science__qa__gpt4_a1c560a0b1c6b3e7428f6d0438370021f}{00100}}\ \ \ \ \ total\ =\ results[\textcolor{stringliteral}{'correct'}]\ +\ results[\textcolor{stringliteral}{'incorrect'}]}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00101}00101\ \ \ \ \ print(f\textcolor{stringliteral}{'Total:\ \{total\},\ Correct:\ \{correct\},\ Accuracy:\ \{correct\ /\ total\ *\ 100:.2f\}\%'})}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00102}00102\ \ \ \ \ print(f\textcolor{stringliteral}{'Total:\ \{total\},\ Correct\ (upper):\ \{results["{}correct\_upperbound"{}]\},\ Accuracy:\ \{results["{}correct\_upperbound"{}]\ /\ total\ *\ 100:.2f\}\%'})}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00103}00103\ \ \ \ \ print(f\textcolor{stringliteral}{'Total:\ \{total\},\ GPT-\/4\ NO-\/ANS\ (RANDOM):\ \{results["{}gpt4\_failed"{}]\},\ Percentage:\ \{results["{}gpt4\_failed"{}]\ /\ total\ *\ 100:.2f\}\%'})}
\DoxyCodeLine{\Hypertarget{eval__science__qa__gpt4_8py_source_l00104}00104\ }

\end{DoxyCode}
