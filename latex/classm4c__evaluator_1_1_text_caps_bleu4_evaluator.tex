\doxysection{m4c\+\_\+evaluator.\+Text\+Caps\+Bleu4\+Evaluator Class Reference}
\hypertarget{classm4c__evaluator_1_1_text_caps_bleu4_evaluator}{}\label{classm4c__evaluator_1_1_text_caps_bleu4_evaluator}\index{m4c\_evaluator.TextCapsBleu4Evaluator@{m4c\_evaluator.TextCapsBleu4Evaluator}}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_a326e8bb61b107d171607295511d4b3a8}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self)
\item 
\mbox{\hyperlink{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_afba90a034c788eff317ab4956f7c1999}{eval\+\_\+pred\+\_\+list}} (self, pred\+\_\+list)
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_ad7f7b31b3cbfb0e807df27f2355fdace}{tokenizer}} = PTBTokenizer()
\item 
\mbox{\hyperlink{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_a0682f40749d1485664c2eb5bff4c16bd}{scorer}} = Bleu(4)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00301}{301}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_a326e8bb61b107d171607295511d4b3a8}\index{m4c\_evaluator.TextCapsBleu4Evaluator@{m4c\_evaluator.TextCapsBleu4Evaluator}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!m4c\_evaluator.TextCapsBleu4Evaluator@{m4c\_evaluator.TextCapsBleu4Evaluator}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily \label{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_a326e8bb61b107d171607295511d4b3a8} 
m4c\+\_\+evaluator.\+Text\+Caps\+Bleu4\+Evaluator.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00302}{302}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self):}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ following\ script\ requires\ Java\ 1.8.0\ and\ pycocotools\ installed.}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ pycocoevalcap\ can\ be\ installed\ with\ pip\ as}}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ pip\ install\ git+https://github.com/ronghanghu/coco-\/caption.git@python23}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Original\ pycocoevalcap\ code\ is\ at\ https://github.com/tylin/coco-\/caption}}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ but\ has\ no\ python3\ support\ yet.}}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ pycocoevalcap.bleu.bleu\ \textcolor{keyword}{import}\ Bleu}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ pycocoevalcap.tokenizer.ptbtokenizer\ \textcolor{keyword}{import}\ PTBTokenizer}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ModuleNotFoundError:}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ print(}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Please\ install\ pycocoevalcap\ module\ using\ "{}}}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}pip\ install\ git+https://github.com/ronghanghu/coco-\/caption.git@python23"{}}\ \ \textcolor{comment}{\#\ noqa}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ self.tokenizer\ =\ PTBTokenizer()}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ self.scorer\ =\ Bleu(4)}
\DoxyCodeLine{00320\ }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_afba90a034c788eff317ab4956f7c1999}\index{m4c\_evaluator.TextCapsBleu4Evaluator@{m4c\_evaluator.TextCapsBleu4Evaluator}!eval\_pred\_list@{eval\_pred\_list}}
\index{eval\_pred\_list@{eval\_pred\_list}!m4c\_evaluator.TextCapsBleu4Evaluator@{m4c\_evaluator.TextCapsBleu4Evaluator}}
\doxysubsubsection{\texorpdfstring{eval\_pred\_list()}{eval\_pred\_list()}}
{\footnotesize\ttfamily \label{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_afba90a034c788eff317ab4956f7c1999} 
m4c\+\_\+evaluator.\+Text\+Caps\+Bleu4\+Evaluator.\+eval\+\_\+pred\+\_\+list (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{pred\+\_\+list}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00321}{321}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keyword}{def\ }eval\_pred\_list(self,\ pred\_list):}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Create\ reference\ and\ hypotheses\ captions.}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ gts\ =\ \{\}}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ res\ =\ \{\}}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ idx,\ entry\ \textcolor{keywordflow}{in}\ enumerate(pred\_list):}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ gts[idx]\ =\ [\{\textcolor{stringliteral}{"{}caption"{}}:\ a\}\ \textcolor{keywordflow}{for}\ a\ \textcolor{keywordflow}{in}\ entry[\textcolor{stringliteral}{"{}gt\_answers"{}}]]}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ res[idx]\ =\ [\{\textcolor{stringliteral}{"{}caption"{}}:\ entry[\textcolor{stringliteral}{"{}pred\_answer"{}}]\}]}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ gts\ =\ self.tokenizer.tokenize(gts)}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ res\ =\ self.tokenizer.tokenize(res)}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ score,\ \_\ =\ self.scorer.compute\_score(gts,\ res)}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ bleu4\ =\ score[3]\ \ \textcolor{comment}{\#\ score\ is\ (Bleu-\/1,\ Bleu-\/2,\ Bleu-\/3,\ Bleu-\/4)}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bleu4}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\Hypertarget{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_a0682f40749d1485664c2eb5bff4c16bd}\index{m4c\_evaluator.TextCapsBleu4Evaluator@{m4c\_evaluator.TextCapsBleu4Evaluator}!scorer@{scorer}}
\index{scorer@{scorer}!m4c\_evaluator.TextCapsBleu4Evaluator@{m4c\_evaluator.TextCapsBleu4Evaluator}}
\doxysubsubsection{\texorpdfstring{scorer}{scorer}}
{\footnotesize\ttfamily \label{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_a0682f40749d1485664c2eb5bff4c16bd} 
m4c\+\_\+evaluator.\+Text\+Caps\+Bleu4\+Evaluator.\+scorer = Bleu(4)}



Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00319}{319}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.

\Hypertarget{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_ad7f7b31b3cbfb0e807df27f2355fdace}\index{m4c\_evaluator.TextCapsBleu4Evaluator@{m4c\_evaluator.TextCapsBleu4Evaluator}!tokenizer@{tokenizer}}
\index{tokenizer@{tokenizer}!m4c\_evaluator.TextCapsBleu4Evaluator@{m4c\_evaluator.TextCapsBleu4Evaluator}}
\doxysubsubsection{\texorpdfstring{tokenizer}{tokenizer}}
{\footnotesize\ttfamily \label{classm4c__evaluator_1_1_text_caps_bleu4_evaluator_ad7f7b31b3cbfb0e807df27f2355fdace} 
m4c\+\_\+evaluator.\+Text\+Caps\+Bleu4\+Evaluator.\+tokenizer = PTBTokenizer()}



Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00318}{318}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
llava/eval/\mbox{\hyperlink{m4c__evaluator_8py}{m4c\+\_\+evaluator.\+py}}\end{DoxyCompactItemize}
