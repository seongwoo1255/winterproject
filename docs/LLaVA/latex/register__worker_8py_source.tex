\doxysection{register\+\_\+worker.\+py}
\hypertarget{register__worker_8py_source}{}\label{register__worker_8py_source}\index{llava/serve/register\_worker.py@{llava/serve/register\_worker.py}}
\mbox{\hyperlink{register__worker_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00001}\mbox{\hyperlink{namespacellava_1_1serve_1_1register__worker}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00002}00002\ \textcolor{stringliteral}{Manually\ register\ workers.}}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00003}00003\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00004}00004\ \textcolor{stringliteral}{Usage:}}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00005}00005\ \textcolor{stringliteral}{python3\ -\/m\ fastchat.serve.register\_worker\ -\/-\/controller\ http://localhost:21001\ -\/-\/worker-\/name\ http://localhost:21002}}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00006}00006\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00008}00008\ \textcolor{keyword}{import}\ argparse}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00010}00010\ \textcolor{keyword}{import}\ requests}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00012}00012\ \textcolor{keywordflow}{if}\ \_\_name\_\_\ ==\ \textcolor{stringliteral}{"{}\_\_main\_\_"{}}:}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00013}\mbox{\hyperlink{namespacellava_1_1serve_1_1register__worker_aef12fd1a2df9a5a5e1104fff5430d0bd}{00013}}\ \ \ \ \ parser\ =\ argparse.ArgumentParser()}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00014}\mbox{\hyperlink{namespacellava_1_1serve_1_1register__worker_a503ddb83e9858aebafafaa723516f5a9}{00014}}\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{"{}-\/-\/controller-\/address"{}},\ type=str)}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00015}00015\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{"{}-\/-\/worker-\/name"{}},\ type=str)}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00016}\mbox{\hyperlink{namespacellava_1_1serve_1_1register__worker_a026f8657a531b8f68da1fd576f77f0d5}{00016}}\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{"{}-\/-\/check-\/heart-\/beat"{}},\ action=\textcolor{stringliteral}{"{}store\_true"{}})}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00017}\mbox{\hyperlink{namespacellava_1_1serve_1_1register__worker_afa2e32c51cebb69669733fdb737a1e2e}{00017}}\ \ \ \ \ args\ =\ parser.parse\_args()}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00019}\mbox{\hyperlink{namespacellava_1_1serve_1_1register__worker_a09c0bd7a2dbb6d70c37479c6424a6284}{00019}}\ \ \ \ \ url\ =\ args.controller\_address\ +\ \textcolor{stringliteral}{"{}/register\_worker"{}}}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00020}\mbox{\hyperlink{namespacellava_1_1serve_1_1register__worker_a090752409e43f8b9fe2824a482d7f9b8}{00020}}\ \ \ \ \ data\ =\ \{}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00021}00021\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}worker\_name"{}}:\ args.worker\_name,}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00022}00022\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}check\_heart\_beat"{}}:\ args.check\_heart\_beat,}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00023}00023\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}worker\_status"{}}:\ \textcolor{keywordtype}{None},}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00024}00024\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00025}\mbox{\hyperlink{namespacellava_1_1serve_1_1register__worker_a220f8b0e65bd128e54318c810b3b36cf}{00025}}\ \ \ \ \ r\ =\ requests.post(url,\ json=data)}
\DoxyCodeLine{\Hypertarget{register__worker_8py_source_l00026}00026\ \ \ \ \ \textcolor{keyword}{assert}\ r.status\_code\ ==\ 200}

\end{DoxyCode}
