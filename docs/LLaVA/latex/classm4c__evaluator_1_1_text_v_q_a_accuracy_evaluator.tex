\doxysection{m4c\+\_\+evaluator.\+Text\+VQAAccuracy\+Evaluator Class Reference}
\hypertarget{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator}{}\label{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator}\index{m4c\_evaluator.TextVQAAccuracyEvaluator@{m4c\_evaluator.TextVQAAccuracyEvaluator}}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_a05abc2e0374ab80852581c615cf81379}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self)
\item 
\mbox{\hyperlink{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_a92e79e719f3d54fd27e9e0fa81f90699}{eval\+\_\+pred\+\_\+list}} (self, pred\+\_\+list)
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_a4a52c9540958eb78771be7b7dea1fe5e}{answer\+\_\+processor}} = \mbox{\hyperlink{classm4c__evaluator_1_1_eval_a_i_answer_processor}{Eval\+AIAnswer\+Processor}}()
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_afa86b80b12f63dd9505594cf1291fabb}{\+\_\+compute\+\_\+answer\+\_\+scores}} (self, raw\+\_\+answers)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00221}{221}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_a05abc2e0374ab80852581c615cf81379}\index{m4c\_evaluator.TextVQAAccuracyEvaluator@{m4c\_evaluator.TextVQAAccuracyEvaluator}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!m4c\_evaluator.TextVQAAccuracyEvaluator@{m4c\_evaluator.TextVQAAccuracyEvaluator}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily \label{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_a05abc2e0374ab80852581c615cf81379} 
m4c\+\_\+evaluator.\+Text\+VQAAccuracy\+Evaluator.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00222}{222}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self):}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ self.answer\_processor\ =\ EvalAIAnswerProcessor()}
\DoxyCodeLine{00224\ }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_afa86b80b12f63dd9505594cf1291fabb}\index{m4c\_evaluator.TextVQAAccuracyEvaluator@{m4c\_evaluator.TextVQAAccuracyEvaluator}!\_compute\_answer\_scores@{\_compute\_answer\_scores}}
\index{\_compute\_answer\_scores@{\_compute\_answer\_scores}!m4c\_evaluator.TextVQAAccuracyEvaluator@{m4c\_evaluator.TextVQAAccuracyEvaluator}}
\doxysubsubsection{\texorpdfstring{\_compute\_answer\_scores()}{\_compute\_answer\_scores()}}
{\footnotesize\ttfamily \label{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_afa86b80b12f63dd9505594cf1291fabb} 
m4c\+\_\+evaluator.\+Text\+VQAAccuracy\+Evaluator.\+\_\+compute\+\_\+answer\+\_\+scores (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{raw\+\_\+answers}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\begin{DoxyVerb}compute the accuracy (soft score) of human answers
\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00225}{225}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keyword}{def\ }\_compute\_answer\_scores(self,\ raw\_answers):}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00227\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ compute\ the\ accuracy\ (soft\ score)\ of\ human\ answers}}
\DoxyCodeLine{00228\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ answers\ =\ [self.answer\_processor(a)\ \textcolor{keywordflow}{for}\ a\ \textcolor{keywordflow}{in}\ raw\_answers]}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ len(answers)\ ==\ 10}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ gt\_answers\ =\ list(enumerate(answers))}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ unique\_answers\ =\ set(answers)}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ unique\_answer\_scores\ =\ \{\}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ unique\_answer\ \textcolor{keywordflow}{in}\ unique\_answers:}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ accs\ =\ []}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ gt\_answer\ \textcolor{keywordflow}{in}\ gt\_answers:}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ other\_answers\ =\ [item\ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ gt\_answers\ \textcolor{keywordflow}{if}\ item\ !=\ gt\_answer]}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matching\_answers\ =\ [}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ item\ \textcolor{keywordflow}{for}\ item\ \textcolor{keywordflow}{in}\ other\_answers\ \textcolor{keywordflow}{if}\ item[1]\ ==\ unique\_answer}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ acc\ =\ min(1,\ float(len(matching\_answers))\ /\ 3)}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ accs.append(acc)}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ unique\_answer\_scores[unique\_answer]\ =\ sum(accs)\ /\ len(accs)}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ unique\_answer\_scores}
\DoxyCodeLine{00247\ }

\end{DoxyCode}
Here is the caller graph for this function\+:
% FIG 0
\Hypertarget{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_a92e79e719f3d54fd27e9e0fa81f90699}\index{m4c\_evaluator.TextVQAAccuracyEvaluator@{m4c\_evaluator.TextVQAAccuracyEvaluator}!eval\_pred\_list@{eval\_pred\_list}}
\index{eval\_pred\_list@{eval\_pred\_list}!m4c\_evaluator.TextVQAAccuracyEvaluator@{m4c\_evaluator.TextVQAAccuracyEvaluator}}
\doxysubsubsection{\texorpdfstring{eval\_pred\_list()}{eval\_pred\_list()}}
{\footnotesize\ttfamily \label{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_a92e79e719f3d54fd27e9e0fa81f90699} 
m4c\+\_\+evaluator.\+Text\+VQAAccuracy\+Evaluator.\+eval\+\_\+pred\+\_\+list (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{pred\+\_\+list}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00248}{248}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keyword}{def\ }eval\_pred\_list(self,\ pred\_list):}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ pred\_scores\ =\ []}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ entry\ \textcolor{keywordflow}{in}\ tqdm(pred\_list):}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ pred\_answer\ =\ self.answer\_processor(entry[\textcolor{stringliteral}{"{}pred\_answer"{}}])}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ unique\_answer\_scores\ =\ self.\_compute\_answer\_scores(entry[\textcolor{stringliteral}{"{}gt\_answers"{}}])}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ score\ =\ unique\_answer\_scores.get(pred\_answer,\ 0.0)}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ pred\_scores.append(score)}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ accuracy\ =\ sum(pred\_scores)\ /\ len(pred\_scores)}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ accuracy}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ }

\end{DoxyCode}
Here is the call graph for this function\+:
% FIG 1


\doxysubsection{Member Data Documentation}
\Hypertarget{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_a4a52c9540958eb78771be7b7dea1fe5e}\index{m4c\_evaluator.TextVQAAccuracyEvaluator@{m4c\_evaluator.TextVQAAccuracyEvaluator}!answer\_processor@{answer\_processor}}
\index{answer\_processor@{answer\_processor}!m4c\_evaluator.TextVQAAccuracyEvaluator@{m4c\_evaluator.TextVQAAccuracyEvaluator}}
\doxysubsubsection{\texorpdfstring{answer\_processor}{answer\_processor}}
{\footnotesize\ttfamily \label{classm4c__evaluator_1_1_text_v_q_a_accuracy_evaluator_a4a52c9540958eb78771be7b7dea1fe5e} 
m4c\+\_\+evaluator.\+Text\+VQAAccuracy\+Evaluator.\+answer\+\_\+processor = \mbox{\hyperlink{classm4c__evaluator_1_1_eval_a_i_answer_processor}{Eval\+AIAnswer\+Processor}}()}



Definition at line \mbox{\hyperlink{m4c__evaluator_8py_source_l00223}{223}} of file \mbox{\hyperlink{m4c__evaluator_8py_source}{m4c\+\_\+evaluator.\+py}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
llava/eval/\mbox{\hyperlink{m4c__evaluator_8py}{m4c\+\_\+evaluator.\+py}}\end{DoxyCompactItemize}
