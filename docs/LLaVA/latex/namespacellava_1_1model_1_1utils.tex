\doxysection{llava.\+model.\+utils Namespace Reference}
\hypertarget{namespacellava_1_1model_1_1utils}{}\label{namespacellava_1_1model_1_1utils}\index{llava.model.utils@{llava.model.utils}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacellava_1_1model_1_1utils_a4fdb060af6a3d86067784a086bb56180}{auto\+\_\+upgrade}} (config)
\begin{DoxyCompactList}\small\item\em 체크포인트를 최신 LLa\+VA 코드베이스에 맞게 업그레이드하는 함수 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{namespacellava_1_1model_1_1utils_a4fdb060af6a3d86067784a086bb56180}\index{llava.model.utils@{llava.model.utils}!auto\_upgrade@{auto\_upgrade}}
\index{auto\_upgrade@{auto\_upgrade}!llava.model.utils@{llava.model.utils}}
\doxysubsubsection{\texorpdfstring{auto\_upgrade()}{auto\_upgrade()}}
{\footnotesize\ttfamily \label{namespacellava_1_1model_1_1utils_a4fdb060af6a3d86067784a086bb56180} 
llava.\+model.\+utils.\+auto\+\_\+upgrade (\begin{DoxyParamCaption}\item[{}]{config}{}\end{DoxyParamCaption})}



체크포인트를 최신 LLa\+VA 코드베이스에 맞게 업그레이드하는 함수 

\begin{DoxyAuthor}{Author}
이지희(2021113406)
\end{DoxyAuthor}

\begin{DoxyParams}{Parameters}
{\em config} & (str) 체크포인트 경로 \\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em Assertion\+Error} & 모델 유형이 호환되지 않을 경우 발생 \\
\hline
{\em System\+Exit} & 사용자가 업그레이드를 거부할 경우 프로그램 종료 \\
\hline
\end{DoxyExceptions}


Definition at line \mbox{\hyperlink{utils_8py_source_l00016}{16}} of file \mbox{\hyperlink{utils_8py_source}{utils.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00016\ \textcolor{keyword}{def\ }auto\_upgrade(config):}
\DoxyCodeLine{00017\ \ \ \ \ cfg\ =\ AutoConfig.from\_pretrained(config)}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{'llava'}\ \textcolor{keywordflow}{in}\ config\ \textcolor{keywordflow}{and}\ \textcolor{stringliteral}{'llava'}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ cfg.model\_type:}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ cfg.model\_type\ ==\ \textcolor{stringliteral}{'llama'}}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}You\ are\ using\ newer\ LLaVA\ code\ base,\ while\ the\ checkpoint\ of\ v0\ is\ from\ older\ code\ base."{}})}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}You\ must\ upgrade\ the\ checkpoint\ to\ the\ new\ code\ base\ (this\ can\ be\ done\ automatically)."{}})}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ confirm\ =\ input(\textcolor{stringliteral}{"{}Please\ confirm\ that\ you\ want\ to\ upgrade\ the\ checkpoint.\ [Y/N]"{}})}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ confirm.lower()\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{"{}y"{}},\ \textcolor{stringliteral}{"{}yes"{}}]:}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Upgrading\ checkpoint..."{}})}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ len(cfg.architectures)\ ==\ 1}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \ \ \ \ setattr(cfg.\_\_class\_\_,\ \textcolor{stringliteral}{"{}model\_type"{}},\ \textcolor{stringliteral}{"{}llava"{}})}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \ \ \ \ cfg.architectures[0]\ =\ \textcolor{stringliteral}{'LlavaLlamaForCausalLM'}}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \ \ \ \ cfg.save\_pretrained(config)}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Checkpoint\ upgraded."{}})}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Checkpoint\ upgrade\ aborted."{}})}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ exit(1)}

\end{DoxyCode}
